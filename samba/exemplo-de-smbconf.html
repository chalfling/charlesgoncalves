<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html lang="pt-br">
<head>
  <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.6.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <base>
  <meta name="keywords" content="halfling, CG Tecnologia">
  <meta name="author" content="Administrator">
  <meta name="description" content="CG Tecnologia LTDA - Artigos de TI">
  <meta name="generator" content="Joomla! - Open Source Content Management">
  <title>smb.conf</title>
  <link href="../templates/world_of_warcraft_3_flash/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
  <meta name="designer" content="Juergen Koller - http://www.lernvid.com">
  <meta name="licence" content="Copyright LernVid.com - Creative Commons Sharalike 3.0">
  <link href="../templates/world_of_warcraft_3_flash/css/template.css" rel="stylesheet" type="text/css" media="all">
  <link href="../templates/world_of_warcraft_3_flash/css/joomla.css" rel="stylesheet" type="text/css" media="all">
  <link href="../templates/world_of_warcraft_3_flash/css/typo.css" rel="stylesheet" type="text/css" media="all">
  <link rel="shortcut icon" href="../templates/world_of_warcraft_3_flash/favicon.ico">
  <style type="text/css">
  div.c4 {position:absolute; top:0; left:0; z-index:0;}
  a.c3 {position:relative; color: #FF8C00; ; font-size:36px; z-index:5;}
  </style>
</head>
<body>
  <div id="wrapper">
    <div id="bg_up">
      <div id="masthead_container">
        <div id="masthead">
          <a id="guild_name" href="./" class="c3" name="guild_name">CG Tecnologia</a>
          <div class="c4"></div>
        </div>
      </div>
      <div id="container">
        <div id="page_content">
          <div id="content_up">
            <div id="content_up_left">
              <div id="content_up_right"></div>
            </div>
          </div>
          <div id="sidebar_left">
            <div class="module_menu">
              <h3 class="module"><strong>Main Menu</strong></h3>
              <div>
                <ul class="nav menu">
                  <li class="item-14"><a href="./">Home</a></li>
                  <li class="item-2 parent"><a href="../dcc.html">DCC</a></li>
                  <li class="item-5 active deeper parent">
                    <a href="../samba.html">SAMBA</a>
                    <ul class="nav-child unstyled small">
                      <li class="item-7"><a href="linux.html">Linux</a></li>
                      <li class="item-8"><a href="o-que-e-samba.html">O que é SAMBA?</a></li>
                      <li class="item-9"><a href="o-protocolo-smb.html">O Protocolo SMB</a></li>
                      <li class="item-10"><a href="seguranca.html">Segurança</a></li>
                      <li class="item-11 current active"><a href="exemplo-de-smbconf.html">smb.conf</a></li>
                    </ul>
                  </li>
                  <li class="item-13"><a href="../aplicativos.html">Aplicativos</a></li>
                  <li class="item-12"><a href="http://www.dattebayobrasil.com/" target="_blank">Datebayo Brasil</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div id="content_outleft">
            <div id="maincontent">
              <div id="system-message-container">
                <div id="system-message"></div>
              </div>
              <div class="item-page">
                <h2 class="contentheading">Exemplo de smb.conf</h2>
                <p><strong>[global]</strong></p>
                <p># Grupo de trabalho/ Domínio</p>
                <p><strong>Workgroup</strong> = ORION</p>
                <p># Nome da maquina do ambiente de rede</p>
                <p><strong>Netbios name</strong> = ORION</p>
                <p><strong># Comentário no ambiente de rede</strong></p>
                <p><strong><strong>Server string</strong> = Servidor de Arquivos Samba</strong></p>
                <p><strong>#Verifica de tempo em tempo se as estações Windows estão respondendo</strong></p>
                <p><strong><strong>Keepalive</strong> = 20</strong></p>
                <p><strong># Para evitar que senhas sejam descobertas através de análise de pacotes circulando na rede</strong></p>
                <p><strong><strong>Encrypt passwords</strong> = Yes</strong></p>
                <p><strong># Tamanho mínimo da senha</strong></p>
                <p><strong><strong>min passwd length</strong> = 4</strong></p>
                <p><strong># Problemas com a sincronização em maquinas Windows 2000</strong></p>
                <p><strong><strong>Unix password sync</strong> = Yes</strong></p>
                <p><strong># Local do arquivo de log</strong></p>
                <p><strong><strong>Log file</strong> = /samba/log/%U.%m</strong></p>
                <p><strong># Tamanho Máximo de arquivos de log</strong></p>
                <p><strong><strong>Max log size</strong> = 450</strong></p>
                <p><strong># Melhor Desempenho</strong></p>
                <p><strong><strong>Socket options</strong> = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192</strong></p>
                <p><strong># Arquivo de lote que será executado no logon</strong></p>
                <p><strong><strong>Logon script</strong> = netlogon.bat</strong></p>
                <p><strong># Segurança por usuário, vai permitir que o usuário logue-se em qualquer estação configurada.</strong></p>
                <p><strong><strong>Security</strong> = user</strong></p>
                <p><strong># Domain logon vai permitir que sejam feitos logons no samba</strong></p>
                <p><strong><strong>Domain logons</strong> = Yes</strong></p>
                <p><strong># SO level é um valor que é usado na disputa pelo PDC, servidores Windows usam o valor 32.</strong></p>
                <p><strong><strong>OS level</strong> = 100</strong></p>
                <p><strong><strong>Preferred master</strong> = Yes</strong></p>
                <p><strong># Mestre do domínio</strong></p>
                <p><strong><strong>Domain master</strong> = Yes</strong></p>
                <p><strong># IPs de conexão ao samba</strong></p>
                <p><strong><strong>Hosts allow</strong> = 192.168. 127.0.0.1</strong></p>
                <p><strong><strong>Interfaces</strong> = 192.168.1.1</strong></p>
                <p><strong># Carregar ou não impressoras</strong></p>
                <p><strong><strong>Load printers</strong> = no</strong></p>
                <p><strong># Para que os arquivos criados fiquem em minúsculo</strong></p>
                <p><strong><strong>Preserve case</strong> = no</strong></p>
                <p><strong><strong>Short preserve case</strong> = no</strong></p>
                <p><strong><strong>Default case</strong> = lower</strong></p>
                <p><strong># Diretório onde ficara o arquivo de lote definido acima</strong></p>
                <p><strong><strong>Logon path</strong> = /samba/netlogon</strong></p>
                <p><strong><strong>[Netlogon</strong>]</strong></p>
                <p><strong><strong>Comment</strong> = Network Logon Service</strong></p>
                <p><strong><strong>Path</strong> = /samba/netlogon</strong></p>
                <p><strong><strong>Guest ok</strong> = Yes</strong></p>
                <p><strong><strong>Browseable</strong> = No</strong></p>
                <p><strong># Diretório /usuario, somente o dono do mesmo pode acessar.</strong></p>
                <p><strong>[Homes]</strong></p>
                <p><strong><strong>Comment</strong> = Homes Directories</strong></p>
                <p><strong><strong>Path</strong> = /samba/home/%U</strong></p>
                <p><strong><strong>Valid users</strong> = %U</strong></p>
                <p><strong><strong>Guest ok</strong> = Yes</strong></p>
                <p><strong><strong>Force create mode</strong> = 0755</strong></p>
                <p><strong><strong>Force directory mode</strong> = 0755</strong></p>
                <p><strong><strong>Browseable</strong> = No</strong></p>
                <p><strong>Depois de configurar o arquivo, verifique se a conta root do sistema foi cadastrada no Samba e se as senhas estão iguais. Caso necessário, use o comando "smbpasswd -a root" para cadastrar o root.</strong></p>
                <p><strong>Aproveite para criar a pasta "/samba/netlogon" e configurar corretamente as permissões:</strong></p>
                <p><strong># Mkdir -p /samba/netlogon</strong></p>
                <p><strong># Chmod 775 /samba/netlogon</strong></p>
                <p><strong>Com o "775" estamos permitindo que além do root, outros usuários que você adicionar no grupo possam alterar o conteúdo da pasta. Isso pode ser útil caso existam outros administradores de rede além de você.</strong></p>
                <p><strong>Cadastre agora os logins dos usuários, com as senhas que eles utilizarão para se logar a partir das máquinas Windows. Neste caso não é preciso se preocupar em manter as senhas em sincronismo entre o servidor e as estações. Na verdade, as contas que criamos aqui não precisam sequer existirem nas estações, pois o login será feito no servidor. Para adicionar um usuário de teste "halfling", use os comandos:</strong></p>
                <p><strong># adduser halfling</strong></p>
                <p><strong># smbpasswd -a halfling</strong></p>
                <p><strong>Por último, é necessário criar o arquivo "/samba/netlogon/netlogon.bat", um script que é lido e executado pelos clientes ao fazer logon. Você pode fazer muitas coisas através dele, mas um exemplo de arquivo funcional é:</strong></p>
                <p><strong><strong>Net use</strong> H: \\fileserver\homes</strong></p>
                <p><strong><strong>Net use</strong> P: \\fileserver\publico</strong></p>
                <p><strong><strong>Net time</strong> \\fileserver /set /y</strong></p>
                <p><strong>Este script faz com que a pasta home de cada usuário (compartilhada pelo Samba através da seção "homes") seja automaticamente mapeada como a unidade "H:" no cliente, o que pode ser bastante útil para backups, por exemplo. Naturalmente, cada usuário tem acesso apenas a seu próprio home.</strong></p>
                <p><strong>A segunda linha é um exemplo de como fazer com que determinados compartilhamentos do servidor sejam mapeados no cliente. O "net use x: \\192.168.10.1\publico" faz com que o compartilhamento "arquivos" (que precisaria ser configurado no smb.conf) seja mapeado como o drive "P:" nos clientes. A terceira linha sincroniza o relógio do cliente com o do servidor.</strong></p>
                <p><strong>Lembre-se que o "fileserver" dentro do netlogon.bat deve ser substituído pelo nome do seu servidor Samba, configurado na opção "netbios name =" do smb.conf.</strong></p>
                <p><strong>Mais uma configuração útil (porém opcional) é fazer com que o servidor armazene os arquivos e configurações do usuário (recurso chamado Roaming Profiles), fornecendo-os à estação no momento em que o usuário faz logon. Isto permite que o usuário possa trabalhar em outras máquinas da rede e faz com que seus arquivos de trabalho sejam armazenados no servidor, diminuindo a possibilidade de perda de dados.</strong></p>
                <p><strong>Por outro lado, isto faz com que seja consumido mais espaço de armazenamento do servidor e aumenta o tráfego da rede, já que os arquivos precisam ser transferidos para a estação a cada logon. Isto pode tornar-se um problema caso os usuários da rede tenham o hábito de salhome muitos arquivos grandes na área de trabalho.</strong></p>
                <p><strong>Note que o servidor não armazena todos os arquivos do usuário, apenas as configurações, entradas do menu iniciar, cookies, bookmarks e arquivos temporários do IE e o conteúdo das pastas Desktop, Modelos e Meus Documentos.</strong></p>
                <p><strong>[publico]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio Publico</strong></p>
                <p><strong><strong>path</strong> = /samba/publico</strong></p>
                <p><strong><strong>available</strong> = yes</strong></p>
                <p><strong><strong>public</strong> = yes</strong></p>
                <p><strong><strong>browseable</strong> = yes</strong></p>
                <p><strong><strong>writable</strong> = yes</strong></p>
                <p><strong><strong>guest ok</strong> = yes</strong></p>
                <p><strong><strong>force create mode</strong> = 777</strong></p>
                <p><strong><strong>force directory mode</strong> = 777</strong></p>
                <p><strong>[aplicativos]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Aplicativos</strong></p>
                <p><strong><strong>path</strong> = /samba/aplicativos</strong></p>
                <p><strong><strong>available</strong> = yes</strong></p>
                <p><strong><strong>public</strong> = yes</strong></p>
                <p><strong><strong>browseable</strong> = yes</strong></p>
                <p><strong><strong>writable</strong> = no</strong></p>
                <p><strong><strong>guest ok</strong> = yes</strong></p>
                <p><strong><strong>force create mode</strong> = 775</strong></p>
                <p><strong><strong>force directory mode</strong> = 775</strong></p>
                <p><strong># Compartilhamentos da empresa</strong></p>
                <p><strong>[almoxarifado]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Almoxarifado</strong></p>
                <p><strong><strong>path</strong> = /samba/almoxarifado</strong></p>
                <p><strong><strong>valid</strong> <strong>users</strong> = @almoxarifado</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write</strong> <strong>list</strong> = @almoxarifado</strong></p>
                <p><strong><strong>force</strong> <strong>user</strong> = almoxarifado</strong></p>
                <p><strong><strong>force</strong> <strong>group</strong> = almoxarifado</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong>[assistencia]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Assitencia</strong></p>
                <p><strong><strong>path</strong> = /samba/assistencia</strong></p>
                <p><strong><strong>valid</strong> <strong>users</strong> = @assistencia</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write</strong> <strong>list</strong> = @assistencia</strong></p>
                <p><strong><strong>force</strong> <strong>user</strong> = assistencia</strong></p>
                <p><strong><strong>force</strong> <strong>group</strong> = assistencia</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong>[compras]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Compras</strong></p>
                <p><strong><strong>path</strong> = /samba/compras</strong></p>
                <p><strong><strong>valid</strong> <strong>users</strong> = @compras</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write</strong> <strong>list</strong> = @compras</strong></p>
                <p><strong><strong>force</strong> <strong>user</strong> = compras</strong></p>
                <p><strong><strong>force</strong> <strong>group</strong> = compras</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong>[diretoria]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Diretoria</strong></p>
                <p><strong><strong>path</strong> = /samba/diretoria</strong></p>
                <p><strong><strong>valid users</strong> = @diretoria</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write list</strong> = @diretoria</strong></p>
                <p><strong><strong>force group</strong> = diretoria</strong></p>
                <p><strong><strong>force user</strong> = diretoria</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong>[financeiro]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Financeiro</strong></p>
                <p><strong><strong>path</strong> = /samba/financeiro</strong></p>
                <p><strong><strong>valid users</strong> = @financeiro</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write list</strong> = @financeiro</strong></p>
                <p><strong><strong>force group</strong> = financeiro</strong></p>
                <p><strong><strong>force user</strong> = financeiro</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong>[pessoal]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Departamento Pessoal</strong></p>
                <p><strong><strong>path</strong> = /samba/pessoal</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong><strong>valid users</strong> = @pessoal</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write list</strong> = pessoal</strong></p>
                <p><strong><strong>force group</strong> = pessoal</strong></p>
                <p><strong>[producao]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Producao</strong></p>
                <p><strong><strong>path</strong> = /samba/producao</strong></p>
                <p><strong><strong>valid users</strong> = @producao</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write list</strong> = @producao</strong></p>
                <p><strong><strong>force user</strong> = producao</strong></p>
                <p><strong><strong>force group</strong> = producao</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong>[vendas]</strong></p>
                <p><strong><strong>comment</strong> = Diretorio de Vendas</strong></p>
                <p><strong><strong>path</strong> = /samba/vendas</strong></p>
                <p><strong><strong>valid users</strong> = @vendas</strong></p>
                <p><strong><strong>writeable</strong> = Yes</strong></p>
                <p><strong><strong>write list</strong> = @vendas</strong></p>
                <p><strong><strong>force user</strong> = vendas</strong></p>
                <p><strong><strong>force group</strong> = vendas</strong></p>
                <p><strong><strong>browseable</strong> = no</strong></p>
                <p><strong># <strong>Comment</strong> - Comentário da Pasta.</strong></p>
                <p><strong># <strong>Valid Users</strong> - Usuários válidos.</strong></p>
                <p><strong># <strong>Path</strong> - Local onde estará localizada a pasta.</strong></p>
                <p><strong># <strong>Avaliable</strong> - Habilita o Compartilhamento .</strong></p>
                <p><strong># <strong>Public</strong> - Qualquer usuário pode conectar-se a este compartilhamento.</strong></p>
                <p><strong># <strong>Browseable</strong> - Visualização Publica.</strong></p>
                <p><strong># <strong>Writable</strong> - Permissão de gravação.</strong></p>
                <p><strong># <strong>Guest ok</strong> - Permissão para convidados.</strong></p>
                <p><strong># <strong>Force Create mode</strong> - É a máscara de criação de direitos para arquivos.</strong></p>
                <p><strong># <strong>Force Directory mode</strong> - É a máscara de criação de direitos para pastas.</strong></p>
                <p><strong># <strong>Valid users</strong> - Usuários com permissão de acesso à pasta.</strong></p>
                <p><strong># <strong>Force user</strong> - Força que determinado usuário seja o manipulador da sessão.</strong></p>
                <p><strong># <strong>Force group</strong> – Força que determinado grupo seja o manipulador da sessão.</strong></p>
                <p><strong># <strong>Write list</strong> – Lista dos usuários com permissão de gravação.</strong></p>
              </div>
            </div>
          </div>
        </div>
        <div class="clr"></div>
        <div id="content_down">
          <div id="content_down_left"></div>
        </div>
        <div id="container2">
          <div id="footer">
            <div id="date">
              <p id="date2"></p>
            </div>
            <script>
                var d = new Date();
                document.getElementById("date2").innerHTML = d.toLocaleDateString() +" "+ d.toLocaleTimeString();
            </script>
            <div id="copyright_info">
              <p>Powered by CG Tecnologia LTDA © 2006-2022</p>
            </div>
          </div>
          <div class="clr"></div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
